{"expireTime":9007200909776281000,"key":"transformer-remark-markdown-html-37654d3ae9c811b0084cf301ac492549-gatsby-remark-prismjs-copy-buttongatsby-remark-prismjs-","val":"<h1>ðŸ’» PSQLðŸ’»</h1>\n<blockquote>\n<p>source</p>\n</blockquote>\n<h2>Basic Commands</h2>\n<h3>Login to postgresql</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">psql <span class=\"token operator\">-</span>U postgres\npsql <span class=\"token operator\">-</span>d mydb <span class=\"token operator\">-</span>U myuser <span class=\"token operator\">-</span>W\npsql <span class=\"token operator\">-</span>h myhost <span class=\"token operator\">-</span>d mydb <span class=\"token operator\">-</span>U myuser <span class=\"token operator\">-</span>W\npsql <span class=\"token operator\">-</span>U myuser <span class=\"token operator\">-</span>h myhost <span class=\"token string\">\"dbname=mydb sslmode=require\"</span> <span class=\"token comment\"># ssl connection</span></code></pre></div>\n<h3>Default Admin Login</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">sudo -u postgres psql -U postgres\nsudo -u postgres psql</code></pre></div>\n<h3>List databases on postgresql server</h3>\n<h3>Determine system tables</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">select * from pg_tables where tableowner = &#39;postgres&#39;;</code></pre></div>\n<h3>List databases from within a pg shell</h3>\n<h3>List databases from UNIX command prompt</h3>\n<h3>Describe a table</h3>\n<h3>Quit psql</h3>\n<h3>Switch postgres database within admin login shell</h3>\n<h3>Reset a user password as admin</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">alter user usertochange with password &#39;new_passwd&#39;;</code></pre></div>\n<h3>Show all tables</h3>\n<h3>List all Schemas</h3>\n<h3>List all users</h3>\n<h3>Load data into postgresql</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">psql -W -U username -H hostname &lt; file.sql</code></pre></div>\n<h3>Dump (Backup) Data into file</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">pg_dump -W -U username -h hostname database_name &gt; file.sql</code></pre></div>\n<h3>Increment a sequence</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">SELECT nextval(&#39;my_id_seq&#39;);</code></pre></div>\n<h3>Create new user</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">CREATE USER lemmy WITH PASSWORD &#39;myPassword&#39;;\n# or\n\nsudo -u postgres createuser lemmy -W</code></pre></div>\n<h3>Change user password</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">ALTER USER Postgres WITH PASSWORD &#39;mypass&#39;;</code></pre></div>\n<h3>Grant user createdb privilege</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">ALTER USER myuser WITH createdb;</code></pre></div>\n<h3>Create a superuser user</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">create user mysuper with password &#39;1234&#39; SUPERUSER\n# or even better\ncreate user mysuper with password &#39;1234&#39; SUPERUSER CREATEDB CREATEROLE INHERIT LOGIN REPLICATION;\n# or\nsudo -u postgres createuser lemmy -W -s</code></pre></div>\n<h3>Upgrade an existing user to superuser</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">alter user mysuper with superuser;\n# or even better\nalter user mysuper with SUPERUSER CREATEDB CREATEROLE INHERIT LOGIN REPLICATION</code></pre></div>\n<h3>Show Database Version</h3>\n<h3>Change Database Owner</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">alter database database_name owner to new_owner;</code></pre></div>\n<h3>Copy a database</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">CREATE DATABASE newdb WITH TEMPLATE originaldb;</code></pre></div>\n<h3>View Database Connections</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">SELECT * FROM pg_stat_activity;</code></pre></div>\n<h3>View show data directory (works on 9.1+)</h3>\n<h3>Show run-time parameters</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">show all;\nselect * from pg_settings;</code></pre></div>\n<h3>Show the block size setting</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\"># show block_size;\n block_size\n------------\n 8192\n(1 row)</code></pre></div>\n<h3>Show stored procedure source</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">SELECT prosrc FROM pg_proc WHERE proname = &#39;procname&#39;</code></pre></div>\n<h3>Grant examples</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># readonly to all tables for myuser</span>\n<span class=\"token keyword\">grant</span> <span class=\"token keyword\">select</span> <span class=\"token keyword\">on</span> <span class=\"token keyword\">all</span> <span class=\"token keyword\">tables</span> <span class=\"token operator\">in</span> <span class=\"token keyword\">schema</span> <span class=\"token keyword\">public</span> <span class=\"token keyword\">to</span> myuser<span class=\"token punctuation\">;</span>\n<span class=\"token comment\"># all privileges on table1 and table2 to myuser</span>\n<span class=\"token keyword\">grant</span> <span class=\"token keyword\">all</span> <span class=\"token keyword\">privileges</span> <span class=\"token keyword\">on</span> table1<span class=\"token punctuation\">,</span> table2<span class=\"token punctuation\">,</span> table3 <span class=\"token keyword\">to</span> myuser<span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Restore Postgres .dump file</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">pg_restore <span class=\"token comment\">--verbose --clean --no-acl --no-owner -h localhost -U myuser -d mydb latest.dump</span></code></pre></div>\n<p><a href=\"https://gist.github.com/kagemusha/1569836\">source</a></p>\n<h3>Find all active sessions and kill them (i.e. for when needing to drop or rename db)</h3>\n<p>Source: <a href=\"http://stackoverflow.com/questions/5408156/how-to-drop-a-postgresql-database-if-there-are-active-connections-to-it\">http://stackoverflow.com/questions/5408156/how-to-drop-a-postgresql-database-if-there-are-active-connections-to-it</a></p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\"># Postgres 9.6 and above</span>\n<span class=\"token keyword\">SELECT</span> pg_terminate_backend<span class=\"token punctuation\">(</span>pg_stat_activity<span class=\"token punctuation\">.</span>pid<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> pg_stat_activity\n<span class=\"token keyword\">WHERE</span> pg_stat_activity<span class=\"token punctuation\">.</span>datname <span class=\"token operator\">=</span> <span class=\"token string\">'TARGET_DB'</span>\n <span class=\"token operator\">AND</span> pid <span class=\"token operator\">&lt;></span> pg_backend_pid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\"># Postgres 9.6 and below</span>\n<span class=\"token keyword\">SELECT</span> pg_terminate_backend<span class=\"token punctuation\">(</span>pg_stat_activity<span class=\"token punctuation\">.</span>procpid<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">FROM</span> pg_stat_activity\n<span class=\"token keyword\">WHERE</span> pg_stat_activity<span class=\"token punctuation\">.</span>datname <span class=\"token operator\">=</span> <span class=\"token string\">'TARGET_DB'</span>\n<span class=\"token operator\">AND</span> procpid <span class=\"token operator\">&lt;></span> pg_backend_pid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Handy Queries</h2>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- List procedure/function</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> pg_proc <span class=\"token keyword\">WHERE</span> proname<span class=\"token operator\">=</span><span class=\"token string\">'__procedurename__'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- List view (including the definition)</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> pg_views <span class=\"token keyword\">WHERE</span> viewname<span class=\"token operator\">=</span><span class=\"token string\">'__viewname__'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Show DB table space in use</span>\n<span class=\"token keyword\">SELECT</span> pg_size_pretty<span class=\"token punctuation\">(</span>pg_total_relation_size<span class=\"token punctuation\">(</span><span class=\"token string\">'__table_name__'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>:\n\n<span class=\"token comment\">-- Show DB space in use</span>\n<span class=\"token keyword\">SELECT</span> pg_size_pretty<span class=\"token punctuation\">(</span>pg_database_size<span class=\"token punctuation\">(</span><span class=\"token string\">'__database_name__'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Show current user's statement timeout</span>\n<span class=\"token keyword\">show</span> statement_timeout<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Show table indexes</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> pg_indexes <span class=\"token keyword\">WHERE</span> tablename<span class=\"token operator\">=</span><span class=\"token string\">'__table_name__'</span> <span class=\"token operator\">AND</span> schemaname<span class=\"token operator\">=</span><span class=\"token string\">'__schema_name__'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Get all indexes from all tables of a schema:</span>\n<span class=\"token keyword\">SELECT</span>\n   t<span class=\"token punctuation\">.</span>relname <span class=\"token keyword\">AS</span> table_name<span class=\"token punctuation\">,</span>\n   i<span class=\"token punctuation\">.</span>relname <span class=\"token keyword\">AS</span> index_name<span class=\"token punctuation\">,</span>\n   a<span class=\"token punctuation\">.</span>attname <span class=\"token keyword\">AS</span> column_name\n<span class=\"token keyword\">FROM</span>\n   pg_class t<span class=\"token punctuation\">,</span>\n   pg_class i<span class=\"token punctuation\">,</span>\n   pg_index ix<span class=\"token punctuation\">,</span>\n   pg_attribute a<span class=\"token punctuation\">,</span>\n   pg_namespace n\n<span class=\"token keyword\">WHERE</span>\n   t<span class=\"token punctuation\">.</span>oid <span class=\"token operator\">=</span> ix<span class=\"token punctuation\">.</span>indrelid\n   <span class=\"token operator\">AND</span> i<span class=\"token punctuation\">.</span>oid <span class=\"token operator\">=</span> ix<span class=\"token punctuation\">.</span>indexrelid\n   <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>attrelid <span class=\"token operator\">=</span> t<span class=\"token punctuation\">.</span>oid\n   <span class=\"token operator\">AND</span> a<span class=\"token punctuation\">.</span>attnum <span class=\"token operator\">=</span> <span class=\"token keyword\">ANY</span><span class=\"token punctuation\">(</span>ix<span class=\"token punctuation\">.</span>indkey<span class=\"token punctuation\">)</span>\n   <span class=\"token operator\">AND</span> t<span class=\"token punctuation\">.</span>relnamespace <span class=\"token operator\">=</span> n<span class=\"token punctuation\">.</span>oid\n   <span class=\"token operator\">AND</span> n<span class=\"token punctuation\">.</span>nspname <span class=\"token operator\">=</span> <span class=\"token string\">'kartones'</span>\n<span class=\"token keyword\">ORDER</span> <span class=\"token keyword\">BY</span>\n   t<span class=\"token punctuation\">.</span>relname<span class=\"token punctuation\">,</span>\n   i<span class=\"token punctuation\">.</span>relname\n\n<span class=\"token comment\">-- Queries being executed at a certain DB</span>\n<span class=\"token keyword\">SELECT</span> datname<span class=\"token punctuation\">,</span> application_name<span class=\"token punctuation\">,</span> pid<span class=\"token punctuation\">,</span> backend_start<span class=\"token punctuation\">,</span> query_start<span class=\"token punctuation\">,</span> state_change<span class=\"token punctuation\">,</span> state<span class=\"token punctuation\">,</span> query\n  <span class=\"token keyword\">FROM</span> pg_stat_activity\n  <span class=\"token keyword\">WHERE</span> datname<span class=\"token operator\">=</span><span class=\"token string\">'__database_name__'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Get all queries from all dbs waiting for data (might be hung)</span>\n<span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> pg_stat_activity <span class=\"token keyword\">WHERE</span> waiting<span class=\"token operator\">=</span><span class=\"token string\">'t'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3>Query analysis</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">-- See the query plan for the given query\nEXPLAIN __query__\n\n-- See and execute the query plan for the given query\nEXPLAIN ANALYZE __query__\n\n-- Collect statistics\nANALYZE [__table__]</code></pre></div>\n<h2>Querying Data</h2>\n<h3>From a Single Table</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"console\"><pre class=\"language-console\"><code class=\"language-console\">-- Query data in columns c1, c2 from a table\nSELECT c1, c2 FROM t;\n\n-- Query distinct rows from a table\nSELECT DISTINCT c1\nFROM t\nWHERE condition;\n\n-- Sort the result set in ascending or descending order\nSELECT c1, c2\nFROM t\nORDER BY c1 ASC [DESC];\n\n-- Skip offset of rows and return the next n rows\nSELECT c1, c2\nFROM t\nORDER BY c1\nLIMIT n\nOFFSET offset;\n\n-- Group rows using an aggregate function\nSELECT c1, aggregate(c2)\nFROM t\nGROUP BY c1;\n\n-- Filter groups using HAVING clause\nSELECT c1, aggregate(c2) FROM t\nGROUP BY c1\nHAVING condition;</code></pre></div>\n<h3>From Multiple Tables</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- Inner join t1 and t2</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">INNER</span> <span class=\"token keyword\">JOIN</span> t2\n<span class=\"token keyword\">ON</span> condition<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Left join t1 and t1</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">LEFT</span> <span class=\"token keyword\">JOIN</span> t2\n<span class=\"token keyword\">ON</span> condition<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Right join t1 and t2</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">RIGHT</span> <span class=\"token keyword\">JOIN</span> t2\n<span class=\"token keyword\">ON</span> condition<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Perform full outer join</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">FULL</span> <span class=\"token keyword\">OUTER</span> <span class=\"token keyword\">JOIN</span> t2\n<span class=\"token keyword\">ON</span> condition<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Produce a Cartesian product of rows in tables</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">CROSS</span> <span class=\"token keyword\">JOIN</span> t2<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Another way to perform cross join</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t1<span class=\"token punctuation\">,</span> t2<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Join t1 to itself using INNER JOIN clause</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t1 A\n<span class=\"token keyword\">INNER</span> <span class=\"token keyword\">JOIN</span> t2 B <span class=\"token keyword\">ON</span> condition</code></pre></div>\n<h3>Using SQL Operators</h3>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- Combine rows from two queries</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">UNION</span> <span class=\"token punctuation\">[</span><span class=\"token keyword\">ALL</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">FROM</span> t2<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Return the intersection of two queries</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">INTERSECT</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">FROM</span> t2<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Subtract a result set from another result set</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">EXCEPT</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">FROM</span> t2<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Query rows using pattern matching %, _</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">FROM</span> t1\n<span class=\"token keyword\">WHERE</span> c1 <span class=\"token punctuation\">[</span><span class=\"token operator\">NOT</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">LIKE</span> pattern<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Query rows in a list</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t\n<span class=\"token keyword\">WHERE</span> c1\n<span class=\"token punctuation\">[</span><span class=\"token operator\">NOT</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">IN</span> value_list<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Query rows between two values</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2\n<span class=\"token keyword\">FROM</span> t\n<span class=\"token keyword\">WHERE</span> c1\n<span class=\"token operator\">BETWEEN</span> low <span class=\"token operator\">AND</span> high<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">-- Check if values in a table is NULL or not</span>\n<span class=\"token keyword\">SELECT</span> c1<span class=\"token punctuation\">,</span> c2 <span class=\"token keyword\">FROM</span> t\n<span class=\"token keyword\">WHERE</span> c1 <span class=\"token operator\">IS</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">NOT</span><span class=\"token punctuation\">]</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Source</h2>\n<ul>\n<li><a href=\"https://www.postgresql.org/docs/9.6/static/app-psql.html\">PostgreSQL 9.6.0 Documentation</a></li>\n<li><a href=\"https://pgexercises.com\">PostgreSQL Exercises</a></li>\n<li><a href=\"http://www.postgresqltutorial.com/postgresql-cheat-sheets\">PostgreSQL Tutorial</a></li>\n</ul>"}